<!doctype html>
<html lang="nl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Route JSON Editor</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header class="topbar">
    <div class="brand">
      <div class="logo">ðŸ§­</div>
      <div>
        <div class="title">Route JSON Editor</div>
        <div class="subtitle">prestart + locaties (images & vragen)</div>
      </div>
    </div>

    <div class="actions">
      <label class="btn ghost">
        JSON ladenâ€¦
        <input id="fileJson" type="file" accept="application/json" hidden>
      </label>
      <button class="btn" id="btnDownload" disabled>Download JSON</button>
      <button class="btn ghost" id="btnCopy" disabled>Kopieer JSON</button>
    </div>
  </header>

  <main class="layout">
    <aside class="sidebar">
      <!-- META -->
      <div class="card">
        <div class="cardTitle">Meta</div>

        <div class="field">
          <label>Titel</label>
          <input id="metaTitle" type="text" placeholder="Titelâ€¦" disabled>
        </div>

        <div class="field">
          <label>Subtitel</label>
          <input id="metaSubtitle" type="text" placeholder="Subtitelâ€¦" disabled>
        </div>

        <div class="field">
          <label>Versie</label>
          <input id="metaVersion" type="text" placeholder="1.0" disabled>
        </div>

        <!-- âœ… NIEUW: assetsBase -->
        <div class="field">
          <label>assetsBase (GitHub Pages route-root)</label>
          <input id="metaAssetsBase" type="text" placeholder="https://geertmendonck.github.io/Geo-afbeeldingen/wo1/" disabled>
          <div class="hint mini">De editor gebruikt automatisch <code>images/</code> onder deze URL.</div>
        </div>

        <div class="hint" id="metaHint">Laad eerst een JSON-bestand.</div>
      </div>

      <!-- NAVIGATIE -->
      <div class="card">
        <div class="cardTitle">Navigatie</div>

        <div class="tabs">
          <button class="tab active" data-tab="prestart">Prestart</button>
          <button class="tab" data-tab="locaties">Locaties</button>
        </div>

        <div id="navPrestart" class="navPane">
          <button class="navItem active" id="navPrestartBtn">âš‘ Prestart</button>
        </div>

        <div id="navLocaties" class="navPane hidden">
          <input id="searchLoc" class="search" type="text" placeholder="Zoek locatieâ€¦" disabled>
          <div id="locList" class="list"></div>
        </div>
      </div>
    </aside>

    <!-- EDITOR -->
    <section class="content">
      <div class="card" id="editorCard">
        <div class="cardTitle" id="editorTitle">Editor</div>
        <div id="editorBody">
          <div class="hint">Laad een JSON om te starten.</div>
        </div>
      </div>
    </section>
  </main>

  <!-- ===================== TEMPLATES ===================== -->

  <!-- PRESTART TEMPLATE -->
  <template id="tplPrestart">
    <div class="grid2">
      <div class="field">
        <label>useLocationId</label>
        <input id="pre_useLocationId" type="text" placeholder="start_positie">
      </div>

      <div class="field">
        <label>Meeting point label</label>
        <input id="pre_meetingLabel" type="text" placeholder="Aan de deur">
      </div>

      <div class="field">
        <label>Meeting point lat</label>
        <input id="pre_meetingLat" type="number" step="0.00001">
      </div>

      <div class="field">
        <label>Meeting point lng</label>
        <input id="pre_meetingLng" type="number" step="0.00001">
      </div>

      <div class="field span2">
        <label>Message</label>
        <textarea id="pre_message" rows="3"></textarea>
      </div>
    </div>

    <div class="sectionTitle">Afbeeldingen (prestart.images)</div>
    <div id="pre_images"></div>

    <!-- âœ… Prestart picker -->
    <div class="dropzone" id="pre_dropzone">
      <div class="dzText">
         <strong>Sleep een afbeelding hierheen</strong><br>
        Preview: enkel nieuw toegevoegde fotoâ€™s of foto's uit de Geo-afbeeldingen-repos (combobox) worden getoond.
        <br>Tip: gebruik liefst fotoâ€™s in <b>landscape</b>.
      </div>

      <div class="pickRow" style="display:flex;gap:10px;align-items:center;flex-wrap:wrap;margin-top:10px">
        <select id="pre_imgSelect" class="input" style="min-width:220px">
          <option value="">Kies uit lijstâ€¦</option>
        </select>

        <input id="pre_imgName" class="input" type="text"
               placeholder="of typ bestandsnaam (bv. menenpoort.jpg)"
               style="min-width:260px">
      </div>

      <div id="pre_imgHint" class="mini" style="margin-top:6px;opacity:.85"></div>

      <img id="pre_imgPreview"
           style="display:none;max-width:100%;border-radius:12px;margin-top:8px"
           alt="">

      <label class="btn ghost" style="margin-top:10px;display:inline-block">
        Kies bestandâ€¦
        <input id="pre_addImageFile" type="file" accept="image/*" hidden>
      </label>
    </div>
  </template>

  <!-- LOCATIE TEMPLATE -->
  <template id="tplLocatie">
    <div class="grid2">
      <div class="field">
        <label>id</label>
        <input id="loc_id" type="text" disabled>
      </div>

      <div class="field">
        <label>slot</label>
        <input id="loc_slot" type="text">
      </div>

      <div class="field span2">
        <label>naam</label>
        <input id="loc_naam" type="text">
      </div>

      <!-- 1 rij met lat/lng/radius/link -->
      <div class="grid4 span2">
        <div class="field">
          <label>lat</label>
          <input id="loc_lat" type="number" step="0.00001">
        </div>

        <div class="field">
          <label>lng</label>
          <input id="loc_lng" type="number" step="0.00001">
        </div>

        <div class="field">
          <label>radius</label>
          <input id="loc_radius" type="number" step="1">
        </div>

        <div class="field">
          <label>(preview) kaartlink</label>
          <a id="loc_mapLink" class="link" href="#" target="_blank" rel="noopener">Open in Google Maps</a>
        </div>
      </div>

      <div class="field span2">
        <label>routeHint</label>
        <textarea id="loc_routeHint" rows="3"></textarea>
      </div>

      <div class="field span2">
        <label>uitleg.kort</label>
        <textarea id="loc_uitlegKort" rows="3"></textarea>
      </div>

      <div class="field span2">
        <label>uitleg.uitgebreid</label>
        <textarea id="loc_uitlegLang" rows="7"></textarea>
      </div>
    </div>

    <div class="sectionTitle">Afbeeldingen (locatie.images)</div>
    <div id="loc_images"></div>

    <!-- âœ… Locatie picker (zelfde idee als prestart) -->
    <div class="dropzone" id="loc_dropzone">
      <div class="dzText">
        <strong>Sleep een afbeelding hierheen</strong><br>
        Preview: enkel nieuw toegevoegde fotoâ€™s of foto's uit de Geo-afbeeldingen-repos (combobox) worden getoond.
        <br>Tip: gebruik liefst fotoâ€™s in <b>landscape</b>.
      </div>

      <div class="pickRow" style="display:flex;gap:10px;align-items:center;flex-wrap:wrap;margin-top:10px">
        <select id="loc_imgSelect" class="input" style="min-width:220px">
          <option value="">Kies uit lijstâ€¦</option>
        </select>

        <input id="loc_imgName" class="input" type="text"
               placeholder="of typ bestandsnaam (bv. stop01.jpg)"
               style="min-width:260px">
      </div>

      <div id="loc_imgHint" class="mini" style="margin-top:6px;opacity:.85"></div>

      <img id="loc_imgPreview"
           style="display:none;max-width:100%;border-radius:12px;margin-top:8px"
           alt="">

      <label class="btn ghost" style="margin-top:10px;display:inline-block">
        Kies bestandâ€¦
        <input id="loc_addImageFile" type="file" accept="image/*" hidden>
      </label>
    </div>

    <div class="sectionTitle">Vragen (locatie.vragen)</div>
    <div id="loc_vragen"></div>

 <div class="row" style="gap:10px;align-items:flex-start;flex-wrap:wrap">
  <div style="display:flex;gap:10px;flex-wrap:wrap;align-items:center">
    <button class="btn ghost" id="q_addOpen" title="Open vraag toevoegen">+ OPEN</button>

    <div class="dd" style="position:relative;display:inline-block">
      <button class="btn ghost" id="q_addOther" title="Voeg ANDER toe (laatste keuze)">+ ANDER</button>
      <button class="btn ghost small" id="q_otherMenuBtn" title="Kies type">â–¾</button>
      <div class="ddMenu hidden" id="q_otherMenu" style="position:absolute;z-index:50;min-width:200px;margin-top:6px">
        <button class="ddItem" data-qtype="mc">Multiple choice</button>
        <button class="ddItem" data-qtype="checkbox">Checkbox</button>
        <!-- later: schaal, rangschik, ... -->
      </div>
    </div>

    <div class="dd" style="position:relative;display:inline-block">
      <button class="btn ghost" id="q_addMedia" title="Voeg MEDIA toe (laatste keuze)">+ MEDIA</button>
      <button class="btn ghost small" id="q_mediaMenuBtn" title="Kies type">â–¾</button>
      <div class="ddMenu hidden" id="q_mediaMenu" style="position:absolute;z-index:50;min-width:200px;margin-top:6px">
        <button class="ddItem" data-qtype="photo">Foto-opdracht</button>
        <button class="ddItem" data-qtype="audio">Audio-opname</button>
        <!-- later: video, scan, ... -->
      </div>
    </div>
  </div>

  <div class="hint" style="flex:1;min-width:260px">
    Slepen is nog niet voorzien â€” maar je kan wel vragen verplaatsen met de pijltjes.
  </div>
</div>

  </template>

  <!-- IMAGE ROW TEMPLATE -->
  <template id="tplImageRow">
    <div class="imgRow">
      <div class="imgPreview">
        <img class="imgTag" alt="">
      </div>

      <div class="imgFields">
        <div class="field">
          <label>file</label>
          <input class="imgFile" type="text" placeholder="menenpoort.jpg">
        </div>

        <div class="field">
          <label>credit</label>
          <input class="imgCredit" type="text" placeholder="Â© â€¦">
        </div>

        <div class="field">
          <label>caption (optioneel)</label>
          <input class="imgCaption" type="text" placeholder="Korte captionâ€¦">
        </div>
      </div>

      <div class="imgBtns">
        <button class="btn ghost small imgUp" title="Omhoog">â†‘</button>
        <button class="btn ghost small imgDown" title="Omlaag">â†“</button>
        <button class="btn danger small imgDel" title="Verwijder">âœ•</button>
      </div>
    </div>
  </template>

  <!-- VRAAG ROW TEMPLATE -->
  <template id="tplVraagRow">
  <div class="qRow">
    <div class="qMain">
      <div class="qMeta">
        <span class="qTypeBadge">OPEN</span>
      </div>

      <textarea class="qText" rows="2" placeholder="Typ je vraagâ€¦"></textarea>
        <div class="qWarn hidden"></div>
        <div class="qPolicy">
            <div class="field miniField">
                <label>Toon tot</label>
                <select class="qShowUntil input">
                <option value="inRange">inRange</option>
                <option value="nextLocation">nextLocation</option>
                <option value="beforeEnd">beforeEnd</option>
                <option value="afterEnd">afterEnd</option>
                </select>
            </div>

            <div class="field miniField">
                <label>Sluit bij</label>
                <select class="qCloseWhen input">
                <option value="inRange">inRange</option>
                <option value="nextLocation">nextLocation</option>
                <option value="beforeEnd">beforeEnd</option>
                <option value="afterEnd">afterEnd</option>
                </select>
            </div>

            <div class="mini qPolicyHint" style="opacity:.8;margin-top:4px"></div>
            </div>

      <!-- extra: opties (enkel voor mc/checkbox) -->
      <div class="qOptions hidden">
        <div class="mini" style="opacity:.85;margin:6px 0">Opties</div>
        <div class="qOptList"></div>
        <button class="btn ghost small qAddOpt" type="button">+ optie</button>
      </div>
    </div>

    <div class="qBtns">
      <button class="btn ghost small qUp" title="Omhoog">â†‘</button>
      <button class="btn ghost small qDown" title="Omlaag">â†“</button>
      <button class="btn danger small qDel" title="Verwijder">âœ•</button>
    </div>
  </div>
</template>


  <script src="app.js"></script>
</body>
</html>
